<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Flow Generator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" media="screen" href="main.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gojs/2.0.11/go.js"></script>
  <script src="main.js"></script>
</head>
<body onload="init()">
  <div id="sample">
    <div id="myDiagramDiv" style="border: solid 1px black; width: 100%; height: 400px"></div>
    <p>
      This sample creates state charts, and more specifically, finite-state machines.
      A <em>finite-state machine</em> is a mathematical model of computation used to design
      computer programs and sequential logic circuits.
    </p>
    <p>
      The text is editable for both the nodes and the links.
      The user can draw as many links from one node to another node as desired,
      and the links can be reshaped or deleted when selected.
      Double-clicking in the background of the diagram creates a new node.
      The mouse wheel is set to zoom in and out instead of scroll.
    </p>
    <p>
      This sample customizes the <a>Part.selectionAdornmentTemplate</a>
      of the node to a template that contains a button
      The button is positioned to be at the Top-Right corner of the node by
      being in a Spot Panel with its <a>GraphObject.alignment</a> property set to Spot.TopRight.
    </p>
    <p>
      The Button's <a>GraphObject.click</a> method creates a new node data,
      adds it to the model, and creates a link from the original node data to the new node data.
      All of this is done inside a transaction, so that it can be undone by the user
      (Ctrl+Z and Ctrl+Y will undo and redo transactions). After the node is created,
      <a>Diagram.scrollToRect</a> is called in case it is off-screen.
    </p>
    <div>
      <div>
        <button id="SaveButton" onclick="save()">Save</button>
        <button onclick="load()">Load</button>
        Diagram Model saved in JSON format:
      </div>
      <textarea id="mySavedModel" style="width:100%;height:300px">{ "class": "go.GraphLinksModel",
    "nodeKeyProperty": "id",
    "nodeDataArray": [
      { "id": 0, "loc": "120 120", "text": "Initial" },
      { "id": 1, "loc": "330 120", "text": "First down" },
      { "id": 2, "loc": "226 376", "text": "First up" },
      { "id": 3, "loc": "60 276", "text": "Second down" },
      { "id": 4, "loc": "226 226", "text": "Wait" }
    ],
    "linkDataArray": [
      { "from": 0, "to": 0, "text": "up or timer", "curviness": -20 },
      { "from": 0, "to": 1, "text": "down", "curviness": 20 },
      { "from": 1, "to": 0, "text": "up (moved)\nPOST", "curviness": 20 },
      { "from": 1, "to": 1, "text": "down", "curviness": -20 },
      { "from": 1, "to": 2, "text": "up (no move)" },
      { "from": 1, "to": 4, "text": "timer" },
      { "from": 2, "to": 0, "text": "timer\nPOST" },
      { "from": 2, "to": 3, "text": "down" },
      { "from": 3, "to": 0, "text": "up\nPOST\n(dblclick\nif no move)" },
      { "from": 3, "to": 3, "text": "down or timer", "curviness": 20 },
      { "from": 4, "to": 0, "text": "up\nPOST" },
      { "from": 4, "to": 4, "text": "down" }
    ]
  }
      </textarea>
    </div>
  </div>  
</body>
</html>